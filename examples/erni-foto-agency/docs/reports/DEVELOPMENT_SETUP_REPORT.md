# üìã –û—Ç—á–µ—Ç –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ –∞–Ω–∞–ª–∏–∑–µ –ø—Ä–æ–µ–∫—Ç–∞ Erni Foto Agency

**–î–∞—Ç–∞:** 10 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** OpenAI Agents SDK 0.3.3  
**–†–µ–∂–∏–º:** Development  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω

---

## üìä –†–µ–∑—é–º–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã

–ü—Ä–æ–≤–µ–¥–µ–Ω –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ Erni Foto Agency –≤ development —Ä–µ–∂–∏–º–µ. –í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ:

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

1. **–î–µ—Ç–∞–ª—å–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞** - –ó–ê–í–ï–†–®–ï–ù–û
2. **–ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –∑–Ω–∞–Ω–∏–π –æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞—Ö** - –ó–ê–í–ï–†–®–ï–ù–û
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤ development —Ä–µ–∂–∏–º–µ** - –ó–ê–í–ï–†–®–ï–ù–û
4. **–î–µ—Ç–∞–ª—å–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏** - –ó–ê–í–ï–†–®–ï–ù–û
5. **–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ó–ê–í–ï–†–®–ï–ù–û
6. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** - –í –ü–†–û–¶–ï–°–°–ï (—ç—Ç–æ—Ç –æ—Ç—á–µ—Ç)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

**Backend:**
- OpenAI Agents SDK 0.3.3 - –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
- FastAPI 0.118.0 - REST API
- PostgreSQL 16 - —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- Redis 7 - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (schema, vision results)
- Python 3.12 - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫

**Frontend:**
- Next.js 15.5.4 - React framework
- React 19.1.0 - UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- CopilotKit - AI-powered UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- TypeScript - —Ç–∏–ø–∏–∑–∞—Ü–∏—è

**Infrastructure:**
- Docker & Docker Compose - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- Nginx - reverse proxy (production)
- Prometheus & Grafana - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (production)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
erni-foto-agency/
‚îú‚îÄ‚îÄ erni_foto_agency/          # Backend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ erni_agents/           # 6 AI –∞–≥–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ services/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ utils/                 # –£—Ç–∏–ª–∏—Ç—ã (PII, validation, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ performance/           # Cache, circuit breaker, cost optimizer
‚îÇ   ‚îú‚îÄ‚îÄ security/              # Authentication, PII audit
‚îÇ   ‚îú‚îÄ‚îÄ models/                # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ config/                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ main.py                # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ frontend/                  # Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ app/                   # App Router pages
‚îÇ   ‚îú‚îÄ‚îÄ components/            # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ lib/                   # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ tests/                     # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ unit/                  # Unit —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ integration/           # Integration —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ e2e/                   # End-to-end —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ docs/                      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ scripts/                   # –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îî‚îÄ‚îÄ docker-compose.dev.yml     # Development –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

---

## üîÑ Workflow –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

### 6 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤

1. **Workflow Orchestrator** - –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –≤—Å–µ –∞–≥–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ handoff –º–µ—Ö–∞–Ω–∏–∑–º
2. **SharePoint Photo Fetcher** - –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏–∑ SharePoint —Å SHA256 –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π
3. **SharePoint Schema Extractor** - –∏–∑–≤–ª–µ–∫–∞–µ—Ç 23 –ø–æ–ª—è + 119 choice values –∏–∑ SharePoint
4. **Vision Analyzer** - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å GPT-4o/mini, PII –¥–µ—Ç–µ–∫—Ü–∏—è, choice validation
5. **SharePoint Uploader** - batch –∑–∞–≥—Ä—É–∑–∫–∞ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –≤ SharePoint
6. **Validation Reporter** - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç—ã –æ –∫–∞—á–µ—Å—Ç–≤–µ –∏ SLO –º–µ—Ç—Ä–∏–∫–∞—Ö

### –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏

```
User Upload / SharePoint Fetch
         ‚Üì
   Orchestrator
         ‚Üì
  Schema Extractor (cache: 3600s)
         ‚Üì
  Vision Analyzer (GPT-4o/mini)
    ‚îú‚îÄ PII Detection (threshold: 0.87)
    ‚îú‚îÄ Choice Validation (fuzzy: 0.75)
    ‚îî‚îÄ Structured Output
         ‚Üì
  SharePoint Uploader (batch: 10)
         ‚Üì
  Validation Reporter
         ‚Üì
    Quality Report
```

---

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Development –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ù–∞–π–¥–µ–Ω–Ω—ã–µ .env —Ñ–∞–π–ª—ã:**
- `.env` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª (–±—ã–ª –≤ production —Ä–µ–∂–∏–º–µ)
- `.env.development` - development –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚úÖ
- `.env.production` - production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `.env.example` - —à–∞–±–ª–æ–Ω
- `.env.test` - —Ç–µ—Å—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–î–µ–π—Å—Ç–≤–∏–µ:** –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω `.env.development` ‚Üí `.env` –¥–ª—è development —Ä–µ–∂–∏–º–∞

### 2. –ó–∞–ø—É—Å–∫ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
docker-compose -f docker-compose.dev.yml up -d postgres redis
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ PostgreSQL 16 - –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 5432 (healthy)
- ‚úÖ Redis 7 - –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 6380 (healthy)
- ‚úÖ Network `erni-network-dev` —Å–æ–∑–¥–∞–Ω–∞

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PostgreSQL:**
- Host: localhost
- Port: 5432
- Database: erni_agents_dev
- User: erni_user
- Password: erni_password_dev

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Redis:**
- Host: localhost
- Port: 6380 (mapped from 6379)
- Password: erni_redis_dev
- Persistence: AOF enabled

### 3. –ó–∞–ø—É—Å–∫ Backend (FastAPI)

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
cd examples/erni-foto-agency
PYTHONPATH=$PWD:$PYTHONPATH uv run uvicorn erni_foto_agency.main:app \
  --host 0.0.0.0 --port 8085 --reload
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ Backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:8085
- ‚úÖ PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω (session backend)
- ‚úÖ Redis –ø–æ–¥–∫–ª—é—á–µ–Ω (cache backend)
- ‚úÖ –í—Å–µ 6 –∞–≥–µ–Ω—Ç–æ–≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ Health check endpoint –¥–æ—Å—Ç—É–ø–µ–Ω

**–õ–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞:**
```
2025-10-10 15:34:42 [info] FastAPI application started successfully
2025-10-10 15:34:42 [info] Session Manager initialized (PostgreSQL)
2025-10-10 15:34:42 [info] All components initialized successfully
  max_concurrent_requests=10
  parallel_processing_enabled=True
  session_backend=postgresql
```

### 4. Health Check —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**Endpoint:** `GET /health`

**–°—Ç–∞—Ç—É—Å:** `degraded` (–Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è dev –±–µ–∑ —Ç—Ä–∞—Ñ–∏–∫–∞)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- ‚úÖ PostgreSQL: healthy
- ‚úÖ Redis: healthy
- ‚úÖ Schema Extractor: healthy
- ‚úÖ Vision Analyzer: healthy
- ‚úÖ SharePoint Uploader: healthy
- ‚úÖ Validation Reporter: healthy
- ‚úÖ Photo Fetcher: healthy

**SLO Metrics:**
- Total requests: 0 (–Ω–µ—Ç —Ç—Ä–∞—Ñ–∏–∫–∞)
- Success rate: 0.0 (–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö)
- P95 latency: 0.0ms (–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö)
- Cost per image: $0.0 (–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö)

**Cache Stats:**
- Hits: 0
- Misses: 0
- Hit rate: 0.0%
- Cache size: 1.02 MB

---

## üìö –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. Handoff-based Orchestration

–ê–≥–µ–Ω—Ç—ã –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ –º–µ—Ö–∞–Ω–∏–∑–º handoff –∏–∑ OpenAI Agents SDK:

```python
handoffs = [
    handoff(schema_agent, on_handoff=self._on_schema_handoff),
    handoff(vision_agent, on_handoff=self._on_vision_handoff),
    handoff(uploader_agent, on_handoff=self._on_upload_handoff),
    handoff(validation_agent, on_handoff=self._on_report_handoff),
]
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤—Ö–æ–¥—ã/–≤—ã—Ö–æ–¥—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- –¢—Ä–µ–π—Å–∏–Ω–≥ –≤—Å–µ–≥–æ workflow

#### 2. PII Detection (–ó–∞—â–∏—Ç–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- Confidence threshold: 0.87 (—É–≤–µ–ª–∏—á–µ–Ω —Å 0.80)
- Whitelist: 60+ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤
- False positive rate: <20%

**–ó–∞—â–∏—â–∞–µ–º—ã–µ –ø–æ–ª—è:**
- `Kunde` - –∫–ª–∏–µ–Ω—Ç
- `OrtohnePLZ` - –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
- `Beschreibung` - –æ–ø–∏—Å–∞–Ω–∏–µ

**Audit Trail:**
- –í—Å–µ –¥–µ—Ç–µ–∫—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ SQLite
- –ü–æ–ª—è: detection_id, timestamp, field_name, pii_type, confidence, action

#### 3. Choice Validation

**Fuzzy Matching:**
- Threshold: 0.75
- Synonym mappings –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞—Ü–∏–π
- –ê–≤—Ç–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏—è –±–ª–∏–∑–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π

**–ü—Ä–∏–º–µ—Ä:**
```
Input: "Innenansicht"
Corrected: "Innenaufnahme"
Confidence: 0.85
```

#### 4. Cost Optimization

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è:**
- GPT-4o-mini –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ø–æ–ª–µ–π (—ç–∫–æ–Ω–æ–º–∏—è 90%)
- GPT-4o –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø–æ–ª–µ–π (–≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å)
- –¶–µ–ª–µ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ‚â§$0.055/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

**Hourly Budget:**
- Tracking –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- Alerts –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ threshold

#### 5. Caching Strategy

**Redis Cache:**
- SharePoint Schema: TTL 3600s (1 —á–∞—Å)
- Vision Analysis Results: TTL 3600s
- Graph API Tokens: TTL –ø–æ expiration

**–≠–∫–æ–Ω–æ–º–∏—è:**
- Schema cache hit: 100% (–Ω–µ—Ç API –≤—ã–∑–æ–≤–æ–≤)
- Vision cache hit: ~$0.05 –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

#### 6. Circuit Breaker

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- Failure threshold: 5 –æ—à–∏–±–æ–∫
- Success threshold: 3 —É—Å–ø–µ—Ö–∞
- Timeout: 60 —Å–µ–∫—É–Ω–¥
- Max timeout: 300 —Å–µ–∫—É–Ω–¥ (exponential backoff)

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
- OpenAI API –≤—ã–∑–æ–≤—ã
- Microsoft Graph API –≤—ã–∑–æ–≤—ã
- Redis –æ–ø–µ—Ä–∞—Ü–∏–∏

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ unit/                      # 20+ unit —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ test_pii_detector.py
‚îÇ   ‚îú‚îÄ‚îÄ test_circuit_breaker.py
‚îÇ   ‚îú‚îÄ‚îÄ test_choice_validator.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ integration/               # 7+ integration —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ test_health_checks.py
‚îÇ   ‚îú‚îÄ‚îÄ test_api_endpoints.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ e2e/                       # 5+ e2e —Ç–µ—Å—Ç–æ–≤
    ‚îú‚îÄ‚îÄ test_real_workflow.py
    ‚îî‚îÄ‚îÄ ...
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**Health Check:**
- ‚úÖ Backend –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8085
- ‚úÖ PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Redis –ø–æ–¥–∫–ª—é—á–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—Å–µ –∞–≥–µ–Ω—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ Metrics collector –∑–∞–ø—É—â–µ–Ω

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- ‚úÖ DI Container –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- ‚úÖ Session Manager (PostgreSQL backend)
- ‚úÖ Cache Manager (Redis backend)
- ‚úÖ Circuit Breaker –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ Cost Optimizer –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ Health Checker —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: Production .env –≤ development

**–û–ø–∏—Å–∞–Ω–∏–µ:** –§–∞–π–ª `.env` –±—ã–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è production (ENV=production, redis:6379, postgres:5432)

**–†–µ—à–µ–Ω–∏–µ:** –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω `.env.development` ‚Üí `.env`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ Backend –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ localhost:6380 (Redis) –∏ localhost:5432 (PostgreSQL)

### 2. ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: Permission denied –Ω–∞ data/redis/appendonlydir

**–û–ø–∏—Å–∞–Ω–∏–µ:** Uvicorn watchfiles –Ω–µ –º–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Redis

**–í–ª–∏—è–Ω–∏–µ:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ - —Ç–æ–ª—å–∫–æ warning –≤ –ª–æ–≥–∞—Ö, –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É

**–†–µ—à–µ–Ω–∏–µ:** –ú–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ .dockerignore

### 3. ‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: API Key authentication disabled

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í development —Ä–µ–∂–∏–º–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `ENABLE_AUTHENTICATION=false` –≤ `.env.development`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–ª—è production —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `ENABLE_AUTHENTICATION=true`

---

## üìà –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

1. **–î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ integration —Ç–µ—Å—Ç–æ–≤**
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ workflow —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ error handling –∏ retry –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ PII detection —Å edge cases

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Prometheus/Grafana –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –î–∞—à–±–æ—Ä–¥—ã –¥–ª—è SLO –º–µ—Ç—Ä–∏–∫
   - –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ thresholds
   - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è cost tracking

3. **–£–ª—É—á—à–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API**
   - –ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - Swagger UI —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
   - Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

4. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫**
   - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π error handler
   - –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ error responses
   - Correlation IDs –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞

5. **–î–æ–±–∞–≤–∏—Ç—å rate limiting**
   - –ó–∞—â–∏—Ç–∞ –æ—Ç abuse
   - Per-user limits
   - Graceful degradation

6. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å Docker –æ–±—Ä–∞–∑—ã**
   - Multi-stage builds
   - –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–∑–æ–≤
   - Layer caching

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

7. **–î–æ–±–∞–≤–∏—Ç—å E2E —Ç–µ—Å—Ç—ã –¥–ª—è frontend**
   - Playwright/Cypress —Ç–µ—Å—Ç—ã
   - Visual regression testing
   - Accessibility testing

8. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD pipeline**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π deploy –≤ staging
   - Code quality checks

---

## üìù –°–æ–∑–¥–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–í –ø—Ä–æ—Ü–µ—Å—Å–µ –∞–Ω–∞–ª–∏–∑–∞ —Å–æ–∑–¥–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:

1. **BUSINESS_LOGIC_ANALYSIS.md** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
   - Workflow –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
   - –†–æ–ª—å –∫–∞–∂–¥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
   - –ú–µ—Ö–∞–Ω–∏–∑–º—ã handoff
   - –°–∏—Å—Ç–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (PII, authentication)
   - –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

2. **DEVELOPMENT_SETUP_REPORT.md** (—ç—Ç–æ—Ç —Ñ–∞–π–ª) - –æ—Ç—á–µ—Ç –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
   - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ development –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç Erni Foto Agency —É—Å–ø–µ—à–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –≤ development —Ä–µ–∂–∏–º–µ. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

- ‚úÖ PostgreSQL 16 - —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π
- ‚úÖ Redis 7 - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ FastAPI backend - REST API
- ‚úÖ 6 AI –∞–≥–µ–Ω—Ç–æ–≤ - –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
- ‚úÖ Health checks - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ Metrics collection - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–ª–µ–¥–æ–≤–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–º —É–ª—É—á—à–µ–Ω–∏—è–º –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã.

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 10 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ  
**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:** –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, —É–ª—É—á—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

